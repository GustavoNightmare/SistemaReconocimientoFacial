{% extends "base.html" %}
{% block title %}Dashboard - Gimnasio{% endblock %}

{% block content %}
<h1 class="h3 mb-3">Dashboard</h1>

<div class="row mb-4">
    <div class="col-md-4">
        <div class="card shadow-sm">
            <div class="card-body">
                <h5 class="card-title">Accesos de hoy ({{ hoy }})</h5>
                <p class="display-5">{{ accesos_hoy }}</p>
            </div>
        </div>
    </div>
</div>

<div class="card shadow-sm">
    <div class="card-header">
        Últimos accesos
    </div>
    <div class="card-body p-0">
        <div class="table-responsive">
            <table class="table table-hover mb-0">
                <thead class="table-light">
                    <tr>
                        <th>Fecha / hora</th>
                        <th>Usuario</th>
                        <th>Cédula</th>
                        <th>Membresía</th>
                        <th>Permitido</th>
                        <th>Motivo</th>
                    </tr>
                </thead>
                <tbody>
                    {% for a in accesos %}
                    <tr>
                        <td>{{ a.momento }}</td>
                        <td>{{ a.nombre }} {{ a.apellido }}</td>
                        <td>{{ a.cedula or '—' }}</td>
                        <td>
                            {% if a.tipo_codigo %}
                            {{ a.tipo_codigo }} - {{ a.tipo_descripcion }}
                            {% else %}
                            —
                            {% endif %}
                        </td>
                        <td>
                            {% if a.permitido %}
                            <span class="badge bg-success">Sí</span>
                            {% else %}
                            <span class="badge bg-danger">No</span>
                            {% endif %}
                        </td>
                        <td>{{ a.motivo }}</td>
                    </tr>
                    {% else %}
                    <tr>
                        <td colspan="6" class="text-center py-3">Sin accesos registrados aún.</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}